{% extends 'base.html' %}

{% block title %}Community - CryptoVault{% endblock %}

{% block content %}
<div class="card">
    <h1>Community Comments</h1>

    <form method="post">
        <div class="form-group">
            <label for="comment">Post a Comment:</label>
            <textarea id="comment" name="comment" rows="3" placeholder="Share your thoughts..."></textarea>
            <button type="submit" class="btn">Post Comment</button>
        </div>
    </form>

    {% if highlight %}
    <div class="alert alert-success">
        <!-- VULN: Reflected XSS -->
        Highlighting: {{ highlight|safe }}
    </div>
    {% endif %}

    <h2>Recent Comments</h2>
    {% for comment in comments %}
    <div class="card" style="background: #f8f9fa;">
        <strong>{{ comment.user.username }}</strong>
        <small style="color: #666;">{{ comment.timestamp|date:"Y-m-d H:i" }}</small>
        <!-- VULN: No HTML escaping - allows stored XSS -->
        <p>{{ comment.content|safe }}</p>
    </div>
    {% endfor %}
</div>
{% endblock %}
